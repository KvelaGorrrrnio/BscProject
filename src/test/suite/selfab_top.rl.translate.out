list list list int N
list list list int N_

init N_ [3,3,3]
if (null N_) then
  skip
else
  skip
fi (1)
N_[0,1,0] ^= 1
from (N_[0,1,0]) do
  if (N_[0,1,0]) then
    swap N_[0,1,0] N_[1,1,1]
  else
  if (N_[1,1,1]) then
    init N [4,4,4]
    N[2,3,3] += top (top N[2])
    swap N_[1,1,1] N_[1,1,2]
  else
  if (N_[1,1,2]) then
    swap N_[1,1,2] N_[1,2,0]
  else
  if (0) then
    skip
  else
    skip
  fi (1)
  fi (N_[1,2,0])
  fi (N_[1,1,2])
  fi (N_[1,1,1])
loop
  skip
until (N_[1,2,0])
N_[1,2,0] ^= 1
if (null N_) then
  skip
else
  skip
fi (1)
free N_ [3,3,3]
